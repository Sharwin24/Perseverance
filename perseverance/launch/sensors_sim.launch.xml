<launch>
  <!-- Args -->
  <arg name="namespace" default=""/>
  <arg name="param_file" default="$(find-pkg-share perseverance)/config/sim.yaml"/>
  <arg name="log_level"  default="info"/>

  <!-- Enable/disable individual simulated drivers -->
  <arg name="simulated_imu_enable" default="true"/>
  <arg name="simulated_lidar_enable" default="true"/>

  <!-- Simulated IMU -->
  <node pkg="perseverance" exec="simulated_imu" name="simulated_imu" namespace="$(var namespace)"
        output="screen" if="$(var simulated_imu_enable)"
        args="--ros-args --log-level $(var log_level)">
    <param from="$(var param_file)"/>
    <!-- Example remaps -->
    <!-- <remap from="imu/data" to="imu/sim"/> -->
  </node>

  <!-- Simulated LiDaR -->
  <node pkg="perseverance" exec="simulated_lidar" name="simulated_lidar" namespace="$(var namespace)"
        output="screen" if="$(var simulated_lidar_enable)"
        args="--ros-args --log-level $(var log_level)">
    <param from="$(var param_file)"/>
    <!-- Example remaps -->
    <!-- <remap from="scan" to="lidar/sim"/> -->
  </node>

  <!-- Add more simulated sensors here -->
</launch>
